<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>XYZ Hospital - Chat Assistant</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/responsive.css') }}"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/ai-icon.css') }}"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/fontawesome-fallback.css') }}"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <!-- Fallback for FontAwesome -->
  <style>
    /* Ensure FontAwesome icons display properly */
    .fas, .far, .fab {
      font-family: "Font Awesome 6 Free", "Font Awesome 6 Pro", "FontAwesome", sans-serif !important;
      font-weight: 900;
      font-style: normal;
      font-variant: normal;
      text-rendering: auto;
      line-height: 1;
    }
    
    /* Fallback icons if FontAwesome doesn't load */
    .fa-user-md:before { content: "üë®‚Äç‚öïÔ∏è"; }
    .fa-calendar-plus:before { content: "üìÖ"; }
    .fa-calendar-check:before { content: "‚úÖ"; }
    .fa-question-circle:before { content: "‚ùì"; }
    .fa-paper-plane:before { content: "üì§"; }
    .fa-arrow-left:before { content: "‚Üê"; }
    .fa-globe:before { content: "üåê"; }
    
    /* Ensure icons are visible and properly sized */
    .menu-card i, .action-buttons i, .ai-doctor-icon i {
      display: inline-block;
      font-size: inherit;
      text-rendering: auto;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    /* Fix icon sizing in menu cards */
    .menu-card i[class*="fa-"] {
      font-size: 2rem !important;
      margin-bottom: var(--space-sm);
      display: block;
      text-align: center;
    }
    
    /* Fix icon sizing in buttons */
    .action-buttons i[class*="fa-"] {
      margin-right: var(--space-xs);
    }
    
    /* Fix send button icon */
    #sendBtn i[class*="fa-"] {
      margin-right: var(--space-xs);
    }
  </style>
  <style>
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #87CEEB 0%, #B0E0E6 25%, #E0F6FF 50%, #F0F8FF 75%, #87CEEB 100%);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      min-height: 100vh;        
      display: flex;
      flex-direction: column;
      /* Mobile deployment fixes */
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
      box-sizing: border-box;
    }
    
    *, *::before, *::after {
      box-sizing: border-box;
    }
    
    /* Mobile text color fixes - ensure proper contrast */
    @media (max-width: 768px) {
      .title {
        color: var(--primary-blue-800) !important;
        text-shadow: none;
        font-size: 1.5rem !important; /* Match desktop font size */
        font-weight: 700 !important;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important; /* Match desktop font */
      }
      
      .subtitle {
        color: var(--primary-blue-600) !important;
        text-shadow: none;
        font-size: 0.875rem !important; /* Match desktop font size */
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important; /* Match desktop font */
      }
      
      .language-label {
        color: var(--neutral-gray-600) !important;
        font-size: 0.75rem !important; /* Match desktop font size */
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important; /* Match desktop font */
      }
      
      /* Ensure all text is visible on mobile */
      .menu-card, .dept-card, .doctor-card {
        color: var(--neutral-gray-800) !important;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important; /* Match desktop font */
      }
      
      .menu-card .menu-title,
      .dept-card .dept-title,
      .doctor-card .doctor-name {
        color: var(--primary-blue-800) !important;
        font-weight: 700;
        font-size: 1rem !important; /* Match desktop font size */
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important; /* Match desktop font */
      }
      
      .menu-card .menu-sub,
      .dept-card .dept-sub,
      .doctor-card .doctor-info {
        color: var(--neutral-gray-600) !important;
        font-size: 0.75rem !important; /* Match desktop font size */
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important; /* Match desktop font */
      }
      
      .chat-messages .msg {
        color: var(--neutral-gray-800) !important;
        font-size: 0.875rem !important; /* Match desktop font size */
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important; /* Match desktop font */
      }
      
      .chat-messages .bot {
        color: var(--neutral-gray-800) !important;
        font-size: 0.875rem !important; /* Match desktop font size */
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important; /* Match desktop font */
      }
      
      .chat-messages .user {
        color: var(--neutral-white) !important;
        font-size: 0.875rem !important; /* Match desktop font size */
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important; /* Match desktop font */
      }
      
      .chat-messages .info-msg {
        color: var(--primary-blue-800) !important;
        font-size: 0.875rem !important; /* Match desktop font size */
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important; /* Match desktop font */
      }
      
      .action-buttons button {
        color: var(--neutral-white) !important;
        font-weight: 600;
        font-size: 0.875rem !important; /* Match desktop font size */
        padding: var(--space-sm) var(--space-md) !important; /* Reduce button size */
        min-height: 36px !important; /* Smaller button height */
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important; /* Match desktop font */
        background: linear-gradient(135deg, var(--primary-blue-500), var(--primary-blue-600)) !important; /* Keep gradient color */
        border: 1px solid var(--primary-blue-600) !important; /* Keep border */
        box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3) !important; /* Keep shadow */
      }
    }
    
    .container {
      width: 100%;
      max-width: 100%;
      text-align: center;
      padding: var(--space-md);
      flex: 1;
      display: flex;
      flex-direction: column;
      /* Mobile deployment fixes */
      box-sizing: border-box;
      overflow-x: hidden;
      position: relative;
    }
    
    .header { 
      margin-bottom: var(--space-lg);
      background: var(--gradient-card);
      padding: var(--space-lg);
      border-radius: var(--radius-2xl);
      box-shadow: var(--shadow-3d);
      flex-shrink: 0;
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      animation: slideInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .title { 
      font-size: var(--font-size-4xl); 
      font-weight: 800; 
      color: var(--primary-blue-800);
      margin-bottom: var(--space-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
    }
    .subtitle { 
      font-size: var(--font-size-xl); 
      margin-top: var(--space-xs); 
      color: var(--primary-blue-600);
      font-weight: 600;
    }
    .language-label { 
      font-size: var(--font-size-base); 
      margin-top: var(--space-sm); 
      color: var(--neutral-gray-600);
      font-weight: 500;
    }
    
    .action-buttons {
      display: flex; 
      justify-content: center; 
      flex-wrap: wrap;
      gap: var(--space-md); 
      margin: var(--space-lg) 0;
      flex-shrink: 0;
      animation: slideInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.2s both;
    }
    .action-buttons button {
      background: var(--gradient-card); 
      border: 2px solid rgba(255, 255, 255, 0.2); 
      padding: var(--space-md) var(--space-lg);
      border-radius: var(--radius-xl); 
      box-shadow: var(--shadow-3d);
      cursor: pointer; 
      font-size: var(--font-size-base); 
      font-weight: 600;
      transition: all var(--transition-bounce);
      color: var(--primary-blue-600);
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }
    .action-buttons button:hover {
      transform: translateY(-5px) scale(1.05); 
      background: var(--gradient-card-hover);
      border-color: var(--primary-blue-300);
      box-shadow: var(--shadow-glow);
    }
    
    /* ‚úÖ Chat Shell - Compact and Responsive */
    .chat-shell {
      margin: 0 auto;
      margin-top: var(--space-md);
      width: 100%;
      max-width: 800px;
      height: 400px;
      min-height: 400px;
      display: flex;
      flex-direction: column;
      background: var(--gradient-card);
      border-radius: var(--radius-2xl);
      box-shadow: var(--shadow-3d);
      border: 1px solid rgba(255, 255, 255, 0.2);
      overflow: hidden;
      backdrop-filter: blur(15px);
      animation: slideInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.4s both;
      position: relative;
      transition: all var(--transition-normal);
    }
    
    .chat-shell::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--gradient-button);
      border-radius: var(--radius-3xl) var(--radius-3xl) 0 0;
      animation: glow 3s ease-in-out infinite;
    }
    
    /* ‚úÖ Chat messages area - Merged with chat box */
    .chat-messages {
      flex: 1;
      background: transparent;
      border-radius: 0;
      box-shadow: none;
      padding: var(--space-md);
      overflow-y: auto; 
      display: flex;
      flex-direction: column;
      gap: var(--space-sm);
      margin: 0;
      min-height: 0;
    }
    
    /* Message bubbles - Compact */
    .chat-messages .msg {
      display: inline-block;
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius-xl);
      max-width: 80%;
      word-wrap: break-word;
      line-height: 1.4;
      font-size: var(--font-size-base);
      font-weight: 500;
      box-shadow: var(--shadow-3d);
      transition: all var(--transition-normal);
    }
    .chat-messages .msg:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }
    .chat-messages .bot {
      background: linear-gradient(145deg, var(--neutral-gray-50) 0%, var(--neutral-gray-100) 100%);
      align-self: flex-start;
      border-bottom-left-radius: var(--radius-sm);
      border: 1px solid var(--neutral-gray-300);
      color: var(--neutral-gray-800);
    }
    .chat-messages .user {
      background: linear-gradient(135deg, var(--primary-blue-500) 0%, var(--primary-blue-600) 100%);
      align-self: flex-end;
      border-bottom-right-radius: var(--radius-sm);
      color: var(--neutral-white);
    }
    
    /* Info / Tip messages */
    .chat-messages .info-msg {
      background: linear-gradient(145deg, var(--primary-blue-50) 0%, var(--primary-blue-100) 100%);
      font-size: 13px;
      line-height: 1.4;
      color: var(--primary-blue-800);
      padding: 8px 12px;
      border-radius: 12px;
      border: 1px solid var(--primary-blue-200);
      max-width: 90%;
      word-break: break-word;
      align-self: flex-start;
    }
    
    /* Input box - Merged with chat box */
    .chat-input {
      display: flex;
      gap: var(--space-sm);
      margin: 0;
      padding: var(--space-md);
      background: transparent;
      border-radius: 0;
      box-shadow: none;
      border: none;
      border-top: 1px solid var(--neutral-gray-200);
      flex-shrink: 0;
    }
    .chat-input input {
      flex: 1;
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius-lg);
      border: 2px solid var(--neutral-gray-200);
      outline: none;
      font-size: var(--font-size-base);
      background: var(--neutral-white);
      color: var(--neutral-gray-800);
      font-weight: 500;
      transition: all var(--transition-normal);
    }
    
    /* Mobile input text color fix */
    @media (max-width: 768px) {
      .chat-input {
        flex-direction: row !important; /* Keep horizontal layout */
        display: flex !important;
      }
      
      .chat-input input {
        color: var(--neutral-gray-800) !important;
        font-size: 16px; /* Prevent zoom on iOS */
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important; /* Match desktop font */
        flex: 1 !important; /* Make input stretchable */
        width: auto !important; /* Allow width to be flexible */
        min-width: 0 !important; /* Allow shrinking */
      }
      
      .chat-input button {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important; /* Match desktop font */
        font-size: 0.875rem !important; /* Match desktop font size */
        flex-shrink: 0 !important; /* Prevent button from shrinking */
      }
    }
    .chat-input input:focus {
      border-color: var(--primary-blue-400);
      box-shadow: 0 0 0 4px var(--primary-blue-100);
      transform: translateY(-2px);
    }
    .chat-input button {
      padding: var(--space-sm) var(--space-lg);
      border-radius: var(--radius-lg);
      border: none;
      background: var(--gradient-button);
      color: var(--neutral-white);
      cursor: pointer;
      box-shadow: var(--shadow-3d);
      font-size: var(--font-size-base);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.3px;
      transition: all var(--transition-normal);
    }
    .chat-input button:hover {
      background: var(--gradient-button-hover);
      transform: translateY(-3px);
      box-shadow: var(--shadow-xl);
    }
    
    /* ‚úÖ Enhanced Menu / Dept / Doctor cards - Responsive Grid */
    .menu, .department-list, .doctor-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--space-lg);
      margin-top: var(--space-lg);
      flex-shrink: 0;
      animation: slideInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.6s both;
      padding: 0 var(--space-md);
    }
    
    /* Dynamic grid adjustments */
    .menu {
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }
    
    .department-list {
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }
    
    .doctor-list {
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    }
    
    .menu-card, .dept-card, .doctor-card {
      background: var(--gradient-card);
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: var(--space-xl);
      border-radius: var(--radius-2xl);
      box-shadow: var(--shadow-3d);
      cursor: pointer;
      user-select: none;
      transition: all var(--transition-bounce);
      text-align: center;
      width: 100%;
      word-wrap: break-word;
      line-height: 1.4;
      font-weight: 600;
      color: var(--neutral-gray-800);
      min-height: 120px;
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transform-style: preserve-3d;
    }
    
    /* Enhanced hover effects with 3D transforms */
    .menu-card::before, .dept-card::before, .doctor-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left var(--transition-slow);
    }
    .menu-card:hover, .dept-card:hover, .doctor-card:hover {
      transform: translateY(-8px) scale(1.05) rotateX(5deg);
      background: var(--gradient-card-hover);
      border-color: var(--primary-blue-300);
      box-shadow: var(--shadow-glow);
      color: var(--primary-blue-700);
    }
    
    .menu-card:hover::before, .dept-card:hover::before, .doctor-card:hover::before {
      left: 100%;
    }
    
    /* Active state for touch devices */
    .menu-card:active, .dept-card:active, .doctor-card:active {
      transform: translateY(-4px) scale(1.02) rotateX(2deg);
      transition: all var(--transition-fast);
    }

    /* Title big + subtitle small */
    .menu-card .menu-title,
    .dept-card .dept-title,
    .doctor-card .doctor-name {
      font-size: var(--font-size-xl);
      font-weight: 700;
      margin-bottom: var(--space-sm);
      color: var(--primary-blue-800);
    }
    .menu-card .menu-sub,
    .dept-card .dept-sub,
    .doctor-card .doctor-info {
      font-size: var(--font-size-sm);
      font-weight: 500;
      color: var(--neutral-gray-600);
      line-height: 1.4;
    }
    
    /* Enhanced doctor card specific styling */
    .doctor-card {
      min-height: 180px;
      padding: var(--space-lg);
      background: linear-gradient(135deg, var(--neutral-white), var(--primary-blue-50));
      border: 2px solid var(--primary-blue-200);
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.15);
      aspect-ratio: 1;
      max-width: 280px;
      margin: 0 auto;
    }

    .doctor-card:hover {
      background: linear-gradient(135deg, var(--primary-blue-50), var(--primary-blue-100));
      border-color: var(--primary-blue-400);
      box-shadow: 0 8px 30px rgba(59, 130, 246, 0.25);
    }

    .doctor-card-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      gap: var(--space-sm);
    }

    .doctor-photo {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      overflow: hidden;
      border: 3px solid var(--primary-blue-300);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
      margin-bottom: var(--space-sm);
      transition: transform var(--transition-normal);
    }

    .doctor-photo:hover {
      transform: scale(1.05);
    }

    .doctor-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform var(--transition-normal);
    }

    .doctor-info {
      text-align: center;
      width: 100%;
    }

    .doctor-card .doctor-name {
      font-size: var(--font-size-lg);
      font-weight: 700;
      color: var(--primary-blue-800);
      margin-bottom: var(--space-xs);
      line-height: 1.2;
    }

    .doctor-specialization {
      font-size: var(--font-size-sm);
      color: var(--neutral-gray-600);
      font-weight: 500;
      margin-bottom: var(--space-xs);
    }

    .doctor-experience {
      font-size: var(--font-size-xs);
      color: var(--primary-blue-600);
      font-weight: 600;
      background: var(--primary-blue-100);
      padding: var(--space-xs) var(--space-sm);
      border-radius: var(--radius-md);
      display: inline-block;
    }

    /* New vertical row format for doctor list */
    .doctor-list-vertical {
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
      width: 100%;
      max-width: 100%;
    }

    .doctor-row-item {
      background: linear-gradient(135deg, var(--neutral-white), var(--primary-blue-50));
      border: 2px solid var(--primary-blue-200);
      border-radius: var(--radius-lg);
      padding: var(--space-md);
      cursor: pointer;
      transition: all var(--transition-normal);
      box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
    }

    .doctor-row-item:hover {
      background: linear-gradient(135deg, var(--primary-blue-50), var(--primary-blue-100));
      border-color: var(--primary-blue-400);
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.2);
      transform: translateY(-2px);
    }

    .doctor-row-content {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      width: 100%;
    }

    .doctor-photo-small {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      overflow: hidden;
      border: 2px solid var(--primary-blue-300);
      box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
      flex-shrink: 0;
    }

    .doctor-photo-small img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .doctor-details {
      display: flex;
      flex-direction: column;
      gap: var(--space-xs);
      flex: 1;
    }

    .doctor-field {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .field-label {
      font-weight: 600;
      color: var(--primary-blue-700);
      min-width: 80px;
      font-size: var(--font-size-sm);
    }

    .field-value {
      color: var(--neutral-gray-800);
      font-weight: 500;
      font-size: var(--font-size-sm);
    }

    .field-value.doctor-name {
      font-weight: 700;
      color: var(--primary-blue-800);
      font-size: var(--font-size-base);
    }

    .field-value.doctor-fees {
      color: var(--secondary-green-600);
      font-weight: 600;
    }

    /* Responsive doctor card adjustments */
    @media (max-width: 768px) {
      .doctor-card {
        width: 150px !important;
        height: 150px !important;
        max-width: 150px !important;
        min-height: 150px !important;
        padding: var(--space-sm);
        aspect-ratio: 1 !important;
        margin: 0 auto;
      }
      
      .doctor-card-content {
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: var(--space-xs);
      }
      
      .doctor-photo {
        width: 45px;
        height: 45px;
        margin-bottom: var(--space-xs);
      }
      
      .doctor-card .doctor-name {
        font-size: var(--font-size-sm);
        margin-bottom: 2px;
        text-align: center;
        line-height: 1.1;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        max-width: 100%;
      }
      
      .doctor-specialization {
        font-size: 10px;
        margin-bottom: 2px;
        text-align: center;
        line-height: 1.1;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        max-width: 100%;
      }
      
      .doctor-experience {
        font-size: 9px;
        padding: 1px var(--space-xs);
        text-align: center;
      }
    }

    /* Fix doctor card overlap - force vertical layout with proper spacing */
    @media (max-width: 600px) {
      .doctor-list {
        display: flex !important;
        flex-direction: column !important;
        gap: var(--space-md) !important;
        align-items: center !important;
        width: 100% !important;
        max-width: 300px !important;
        margin: 0 auto !important;
      }
      
      .doctor-card {
        width: 200px !important;
        height: 200px !important;
        max-width: 200px !important;
        min-height: 200px !important;
        padding: var(--space-md);
        aspect-ratio: 1 !important;
        margin: 0 !important;
        flex-shrink: 0 !important;
      }
      
      .doctor-card-content {
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: var(--space-sm);
      }
      
      .doctor-photo {
        width: 60px;
        height: 60px;
        margin-bottom: var(--space-sm);
      }
      
      .doctor-card .doctor-name {
        font-size: var(--font-size-base);
        margin-bottom: var(--space-xs);
        text-align: center;
        line-height: 1.2;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        max-width: 100%;
      }
      
      .doctor-specialization {
        font-size: var(--font-size-sm);
        margin-bottom: var(--space-xs);
        text-align: center;
        line-height: 1.2;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        max-width: 100%;
      }
      
      .doctor-experience {
        font-size: var(--font-size-xs);
        padding: var(--space-xs) var(--space-sm);
        text-align: center;
      }
    }

    /* Extra small screens - force single column with flex */
    @media (max-width: 360px) {
      .doctor-list {
        display: flex !important;
        flex-direction: column !important;
        gap: var(--space-md) !important;
        align-items: center !important;
        width: 100% !important;
        max-width: 280px !important;
        margin: 0 auto !important;
      }
      
      .doctor-card {
        width: 180px !important;
        height: 180px !important;
        max-width: 180px !important;
        min-height: 180px !important;
        padding: var(--space-sm);
        aspect-ratio: 1 !important;
        margin: 0 !important;
        flex-shrink: 0 !important;
      }
      
      .doctor-photo {
        width: 50px;
        height: 50px;
        margin-bottom: var(--space-xs);
      }
      
      .doctor-card .doctor-name {
        font-size: var(--font-size-sm);
        margin-bottom: var(--space-xs);
        text-align: center;
        line-height: 1.1;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        max-width: 100%;
      }
      
      .doctor-specialization {
        font-size: 10px;
        margin-bottom: var(--space-xs);
        text-align: center;
        line-height: 1.1;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        max-width: 100%;
      }
      
      .doctor-experience {
        font-size: 9px;
        padding: 1px var(--space-xs);
        text-align: center;
      }
    }
    
    /* Enhanced Responsive adjustments with better breakpoints */
    
    /* Large Desktop (1400px+) */
    @media (min-width: 1400px) {
      .container { 
        max-width: 1400px; 
        margin: 0 auto; 
        padding: 0 var(--space-2xl);
      }
      .chat-shell { 
        max-width: 800px; 
        margin: var(--space-lg) auto;
        height: 450px;
      }
      .menu {
        grid-template-columns: repeat(3, 1fr);
        max-width: 1000px;
        margin: var(--space-xl) auto 0;
      }
      .department-list {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      }
      .doctor-list {
        grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
      }
    }
    
    /* Large Desktop (1200px - 1399px) */
    @media (min-width: 1200px) and (max-width: 1399px) {
      .container { 
        max-width: 1200px; 
        margin: 0 auto;
        padding: 0 var(--space-xl);
      }
      .chat-shell { 
        max-width: 800px;
        margin: var(--space-md) auto;
        height: 420px;
      }
      .menu {
        grid-template-columns: repeat(3, 1fr);
        max-width: 900px;
        margin: var(--space-lg) auto 0;
      }
    }
    
    /* Desktop (992px - 1199px) */
    @media (min-width: 992px) and (max-width: 1199px) {
      .container { 
        max-width: 100%; 
        padding: 0 var(--space-lg);
      }
      .chat-shell { 
        max-width: 100%; 
        margin: var(--space-lg) var(--space-md);
      }
      .title { font-size: var(--font-size-3xl); }
      .subtitle { font-size: var(--font-size-lg); }
      .menu {
        grid-template-columns: repeat(3, 1fr);
        gap: var(--space-md);
        padding: 0 var(--space-sm);
      }
      .department-list {
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      }
      .doctor-list {
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: var(--space-sm);
        justify-items: center;
      }
      .menu-card, .dept-card, .doctor-card {
        font-size: var(--font-size-base);
        padding: var(--space-lg);
        min-height: 100px;
      }
      .chat-messages .msg { font-size: var(--font-size-base); }
      .chat-messages .info-msg { font-size: var(--font-size-sm); }
      .chat-input input, .chat-input button { font-size: var(--font-size-base); }
    }
    
    /* Tablet Landscape (768px - 991px) - Mobile App Style */
    @media (min-width: 768px) and (max-width: 991px) {
      .container { 
        padding: var(--space-xs);
        min-height: 100vh;
        box-sizing: border-box;
      }
      .header { 
        padding: var(--space-xs);
        margin-bottom: var(--space-xs);
        box-sizing: border-box;
      }
      .chat-shell { 
        height: 320px;
        max-width: 100%;
        margin: var(--space-xs);
        border-radius: var(--radius-lg);
        box-sizing: border-box;
      }
      .title { 
        font-size: var(--font-size-lg);
        flex-direction: column;
        gap: var(--space-xs);
      }
      .subtitle { font-size: var(--font-size-sm); }
      .menu {
        grid-template-columns: repeat(2, 1fr);
        gap: var(--space-md);
        padding: 0;
      }
      .department-list {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }
      .doctor-list {
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: var(--space-sm);
        justify-items: center;
      }
      .menu-card, .dept-card, .doctor-card {
        font-size: var(--font-size-xs);
        padding: var(--space-xs);
        min-height: 45px;
      }
      .chat-messages .msg { font-size: var(--font-size-xs); }
      .chat-messages .info-msg { font-size: var(--font-size-xs); }
      .chat-input input, .chat-input button { font-size: var(--font-size-xs); }
      .action-buttons button { 
        padding: var(--space-xs) var(--space-sm);
        font-size: var(--font-size-xs);
        min-height: 32px;
      }
    }
    
    /* Tablet Portrait (600px - 767px) - Mobile App Style */
    @media (min-width: 600px) and (max-width: 767px) {
      .container { 
        padding: var(--space-xs);
        min-height: 100vh;
        box-sizing: border-box;
      }
      .header { 
        padding: var(--space-xs);
        margin-bottom: var(--space-xs);
        box-sizing: border-box;
      }
      .chat-shell { 
        height: 300px;
        max-width: 100%;
        margin: var(--space-xs);
        border-radius: var(--radius-lg);
        box-sizing: border-box;
      }
      .title { 
        font-size: var(--font-size-base);
        flex-direction: column;
        gap: var(--space-xs);
      }
      .subtitle { font-size: var(--font-size-xs); }
      .menu {
        grid-template-columns: repeat(2, 1fr);
        gap: var(--space-sm);
        padding: 0;
      }
      .department-list {
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      }
      .doctor-list {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: var(--space-sm);
        justify-items: center;
      }
      .menu-card, .dept-card, .doctor-card {
        font-size: var(--font-size-xs);
        padding: var(--space-xs);
        min-height: 35px;
      }
      .chat-messages .msg { 
        font-size: var(--font-size-xs);
        max-width: 90%;
        padding: var(--space-xs) var(--space-sm);
      }
      .chat-messages .info-msg { font-size: var(--font-size-xs); }
      .chat-input input, .chat-input button { font-size: var(--font-size-xs); }
      .action-buttons button { 
        padding: var(--space-xs) var(--space-sm);
        font-size: var(--font-size-xs);
        min-height: 28px;
      }
    }
    
    /* Mobile Landscape (480px - 599px) - Mobile App Style */
    @media (min-width: 480px) and (max-width: 599px) {
      .container { 
        padding: var(--space-xs);
        min-height: 100vh;
        box-sizing: border-box;
      }
      .header { 
        padding: var(--space-xs);
        margin-bottom: var(--space-xs);
        box-sizing: border-box;
      }
      .chat-shell { 
        height: 280px;
        max-width: 100%;
        margin: var(--space-xs);
        border-radius: var(--radius-lg);
        box-sizing: border-box;
      }
      .title { 
        font-size: var(--font-size-sm);
        flex-direction: column;
        gap: var(--space-xs);
      }
      .subtitle { font-size: var(--font-size-xs); }
      .menu {
        grid-template-columns: 1fr;
        gap: var(--space-sm);
        padding: 0;
      }
      .department-list {
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      }
      .doctor-list {
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: var(--space-xs);
        justify-items: center;
      }
      .menu-card, .dept-card, .doctor-card {
        font-size: var(--font-size-xs);
        padding: var(--space-xs);
        min-height: 30px;
      }
      .chat-messages .msg { 
        font-size: var(--font-size-xs);
        max-width: 95%;
        padding: var(--space-xs) var(--space-sm);
      }
      .chat-messages .info-msg { font-size: var(--font-size-xs); }
      .chat-input input, .chat-input button { 
        font-size: var(--font-size-xs);
        padding: var(--space-xs);
      }
      .action-buttons button { 
        padding: var(--space-xs) var(--space-sm);
        font-size: var(--font-size-xs);
        min-height: 24px;
      }
    }
    
    /* Mobile Portrait (320px - 479px) - Mobile App Style */
    @media (max-width: 479px) {
      .container { 
        padding: var(--space-xs);
        min-height: 100vh;
        box-sizing: border-box;
      }
      .header { 
        padding: var(--space-xs);
        margin-bottom: var(--space-xs);
        box-sizing: border-box;
      }
      .chat-shell { 
        height: 350px;
        max-width: 100%;
        margin: var(--space-xs);
        border-radius: var(--radius-lg);
        box-sizing: border-box;
      }
      .title { 
        font-size: var(--font-size-sm);
        flex-direction: column;
        gap: var(--space-xs);
      }
      .subtitle { font-size: var(--font-size-xs); }
      .menu {
        grid-template-columns: 1fr;
        gap: var(--space-xs);
        padding: 0;
      }
      .department-list {
        grid-template-columns: 1fr;
        gap: var(--space-xs);
      }
      .doctor-list {
        grid-template-columns: 1fr;
        gap: var(--space-xs);
      }
      .menu-card, .dept-card, .doctor-card {
        font-size: var(--font-size-xs);
        padding: var(--space-xs);
        min-height: 25px;
      }
      .chat-messages .msg { 
        font-size: var(--font-size-xs);
        max-width: 95%;
        padding: var(--space-xs) var(--space-sm);
      }
      .chat-messages .info-msg { font-size: var(--font-size-xs); }
      .chat-input { 
        padding: var(--space-sm);
        flex-direction: row !important; /* Keep horizontal layout */
        gap: var(--space-xs);
      }
      .chat-input input, .chat-input button { 
        font-size: var(--font-size-xs);
        padding: var(--space-xs);
        min-height: 40px;
      }
      .chat-input input {
        flex: 1 !important; /* Make input stretchable */
        width: auto !important; /* Allow width to be flexible */
      }
      .action-buttons { 
        flex-direction: column;
        gap: var(--space-xs);
      }
      .action-buttons button { 
        padding: var(--space-xs) var(--space-sm);
        min-height: 20px;
        font-size: var(--font-size-xs);
      }
    }
    .appt-card {
  background: linear-gradient(145deg, var(--neutral-white) 0%, var(--neutral-gray-50) 100%);
  border-radius: var(--radius-2xl);
  padding: var(--space-xl);
  margin: var(--space-md) 0;
  box-shadow: var(--shadow-3d);
  animation: fadeIn 0.3s ease-in-out;
  text-align: left;
  border: 1px solid var(--neutral-gray-200);
}

.appt-name {
  font-size: var(--font-size-xl);
  font-weight: 700;
  color: var(--primary-blue-800);
  margin-bottom: var(--space-sm);
}

.appt-phone, .appt-dept, .appt-datetime, .appt-status {
  font-size: var(--font-size-base);
  margin: var(--space-xs) 0;
  color: var(--neutral-gray-700);
  font-weight: 500;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

    .hidden { display: none; }

    .appt-card {
  background: linear-gradient(145deg, var(--neutral-white) 0%, var(--neutral-gray-50) 100%);
  border-radius: var(--radius-2xl);
  padding: var(--space-xl);
  margin: var(--space-md) 0;
  box-shadow: var(--shadow-3d);
  text-align: left;
  font-size: var(--font-size-base);
  line-height: 1.6;
  border: 1px solid var(--neutral-gray-200);
}

.appt-title {
  font-size: var(--font-size-lg);
  font-weight: 700;
  color: var(--primary-blue-800);
  margin-bottom: var(--space-md);
  border-bottom: 2px solid var(--neutral-gray-200);
  padding-bottom: var(--space-sm);
}

.appt-field {
  margin: var(--space-xs) 0;
  font-weight: 500;
  color: var(--neutral-gray-700);
}

/* Enhanced Gradient Animation */
@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* New Dynamic Animations */
@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(30px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes glow {
  0%, 100% { 
    box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
  }
  50% { 
    box-shadow: 0 0 30px rgba(102, 126, 234, 0.6);
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.05);
  }
}

/* Touch feedback animation */
@keyframes touchFeedback {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.95);
  }
  100% {
    transform: scale(1);
  }
}

/* Loading animation for dynamic content */
@keyframes loading {
  0% {
    opacity: 0.5;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0.5;
  }
}

/* Smooth transitions for responsive changes */
@keyframes responsiveTransition {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Utility classes for dynamic interactions */
.touch-feedback {
  animation: touchFeedback 0.2s ease;
}

.loading-state {
  animation: loading 1.5s ease-in-out infinite;
}

.responsive-transition {
  animation: responsiveTransition 0.3s ease;
}

/* Enhanced focus states for accessibility */
.menu-card:focus,
.dept-card:focus,
.doctor-card:focus {
  outline: 3px solid var(--primary-blue-400);
  outline-offset: 2px;
  transform: translateY(-4px) scale(1.02);
}

    /* Widget Embed Mode - Extra Compact */
    .widget-mode .chat-shell {
      max-width: 400px;
      height: 350px;
      margin: var(--space-xs);
      border-radius: var(--radius-lg);
    }
    
    /* Mobile responsive adjustments for better proportions */
    @media (max-width: 599px) {
      .chat-shell {
        min-height: 280px;
      }
      
      /* Fix mobile viewport issues */
      body {
        overflow-x: hidden;
        -webkit-text-size-adjust: 100%;
        -ms-text-size-adjust: 100%;
      }
      
      .container {
        width: 100%;
        overflow-x: hidden;
      }
      
      /* Fix touch targets */
      .menu-card, .dept-card, .doctor-card {
        min-height: 44px; /* iOS recommended touch target */
        cursor: pointer;
      }
      
      /* Fix input zoom on iOS */
      input[type="text"], input[type="email"], input[type="tel"] {
        font-size: 16px;
        color: var(--neutral-gray-800) !important;
      }
      
      /* Fix mobile text colors for all mobile devices */
      .title {
        color: var(--primary-blue-800) !important;
      }
      
      .subtitle {
        color: var(--primary-blue-600) !important;
      }
      
      .language-label {
        color: var(--neutral-gray-600) !important;
      }
      
      .menu-card, .dept-card, .doctor-card {
        color: var(--neutral-gray-800) !important;
      }
      
      .menu-card .menu-title,
      .dept-card .dept-title,
      .doctor-card .doctor-name {
        color: var(--primary-blue-800) !important;
      }
      
      .menu-card .menu-sub,
      .dept-card .dept-sub,
      .doctor-card .doctor-info {
        color: var(--neutral-gray-600) !important;
      }
      
      .chat-messages .msg {
        color: var(--neutral-gray-800) !important;
      }
      
      .chat-messages .bot {
        color: var(--neutral-gray-800) !important;
      }
      
      .chat-messages .user {
        color: var(--neutral-white) !important;
      }
      
      .chat-messages .info-msg {
        color: var(--primary-blue-800) !important;
      }
      
      .action-buttons button {
        color: var(--neutral-white) !important;
      }
    }
    
    @media (max-width: 479px) {
      .chat-shell {
        min-height: 320px;
      }
      
      /* Ensure proper mobile layout */
      .menu {
        grid-template-columns: 1fr;
        gap: var(--space-xs);
      }
      
      /* Fix small screen issues */
      .title {
        font-size: var(--font-size-sm);
        text-align: center;
        color: var(--primary-blue-800) !important;
      }
      
      .subtitle {
        font-size: var(--font-size-xs);
        text-align: center;
        color: var(--primary-blue-600) !important;
      }
      
      /* Fix mobile text color issues */
      .language-label {
        color: var(--neutral-gray-600) !important;
      }
      
      .menu-card, .dept-card, .doctor-card {
        color: var(--neutral-gray-800) !important;
      }
      
      .menu-card .menu-title,
      .dept-card .dept-title,
      .doctor-card .doctor-name {
        color: var(--primary-blue-800) !important;
      }
      
      .menu-card .menu-sub,
      .dept-card .dept-sub,
      .doctor-card .doctor-info {
        color: var(--neutral-gray-600) !important;
      }
      
      .chat-messages .msg {
        color: var(--neutral-gray-800) !important;
      }
      
      .chat-messages .bot {
        color: var(--neutral-gray-800) !important;
      }
      
      .chat-messages .user {
        color: var(--neutral-white) !important;
      }
      
      .chat-messages .info-msg {
        color: var(--primary-blue-800) !important;
      }
    }
    
    .widget-mode .chat-messages {
      padding: var(--space-sm);
      margin: 0;
      gap: var(--space-xs);
    }
    
    .widget-mode .chat-messages .msg {
      padding: var(--space-xs) var(--space-sm);
      font-size: var(--font-size-sm);
      max-width: 85%;
    }
    
    .widget-mode .chat-input {
      padding: var(--space-sm);
      margin: 0;
      gap: var(--space-xs);
    }
    
    .widget-mode .chat-input input {
      padding: var(--space-xs) var(--space-sm);
      font-size: var(--font-size-sm);
    }
    
    .widget-mode .chat-input button {
      padding: var(--space-xs) var(--space-md);
      font-size: var(--font-size-sm);
    }

    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
}

  </style>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="title">
        <div class="ai-doctor-icon">
          <i class="fas fa-user-md"></i>
          <div class="ai-pulse"></div>
          <div class="ai-circuit"></div>
        </div>
        <span id="hospitalName">{{ hospital_id.title() if hospital_id else 'XYZ' }} Hospital</span>
      </div>
      <div id="chatHeading" class="subtitle">Chat Assistant - Main Menu</div>
      <div id="languageDisplay" class="language-label">Language: English</div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button id="backBtn"><i class="fas fa-arrow-left"></i> Back</button>
      <button id="languageBtn"><i class="fas fa-globe"></i> Change Language</button>
    </div>

    <!-- Menu Options -->
    <div id="menuSection" class="menu">
      <div id="menuBookingCard" class="menu-card" onclick="startBookingChatFlow()">
        <i class="fas fa-calendar-plus" style="font-size: 2rem; color: var(--primary-blue-600); margin-bottom: var(--space-sm);"></i>
        <span id="menuBookingTitle" class="menu-title">Booking Appointment</span>
        <span id="menuBookingSub" class="menu-sub">Schedule a new visit</span>
      </div>
      <div id="menuMyAppointmentCard" class="menu-card" onclick="startMyAppointmentChatFlow()">
        <i class="fas fa-calendar-check" style="font-size: 2rem; color: var(--secondary-green-600); margin-bottom: var(--space-sm);"></i>
        <span id="menuMyAppointmentTitle" class="menu-title">My Appointment</span>
        <span id="menuMyAppointmentSub" class="menu-sub">Check or edit your booking</span>
      </div>
      <div id="menuGeneralCard" class="menu-card" onclick="startGeneralQueryChatFlow()">
        <i class="fas fa-question-circle" style="font-size: 2rem; color: var(--accent-purple-600); margin-bottom: var(--space-sm);"></i>
        <span id="menuGeneralTitle" class="menu-title">General Query</span>
        <span id="menuGeneralSub" class="menu-sub">Ask a general question</span>
      </div>
    </div>

    <!-- Chat Shell -->
    <div id="chatShell" class="chat-shell" style="display:none;">
      <div class="chat-messages" id="chatMessages"></div>
      <div class="chat-input">
        <input type="text" id="chatInput" placeholder="Type your message..." />
        <input type="text" id="appointmentDatePicker" class="hidden" />
        <button id="sendBtn"><i class="fas fa-paper-plane"></i> Send</button>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="{{ url_for('static', filename='js/responsive-interactions.js') }}"></script>
  <script src="{{ url_for('static', filename='js/dynamic-animations.js') }}"></script>
  <script src="{{ url_for('static', filename='js/responsive-testing.js') }}"></script>
  <script src="{{ url_for('static', filename='js/chat_booking.js') }}"></script>
  <script src="{{ url_for('static', filename='js/chat_myappointments.js') }}"></script>
  <script src="{{ url_for('static', filename='js/chat_general_query.js') }}"></script>
  <script src="{{ url_for('static', filename='js/chat.js') }}"></script>


  <!-- Menu Click Handlers -->
  <script>
    // Function to start booking chat flow
    function startBookingChatFlow() {
      console.log('Starting booking chat flow...');
      
      // Hide menu section and show chat shell
      document.getElementById('menuSection').style.display = 'none';
      document.getElementById('chatShell').style.display = '';
      
      // Update chat heading
      document.getElementById('chatHeading').textContent = 'Booking Appointment';
      
      // Set current flow
      sessionStorage.setItem('currentFlow', 'booking');
      
      // Clear chat messages and set placeholder
      const chatMessages = document.getElementById('chatMessages');
      if (chatMessages) chatMessages.innerHTML = '';
      
      const chatInput = document.getElementById('chatInput');
      if (chatInput) chatInput.placeholder = 'Type your message here...';
      
      // Start booking flow immediately
      if (window.startBookingFlow) {
        window.startBookingFlow();
      }
    }

    // Function to start my appointment chat flow
    function startMyAppointmentChatFlow() {
      console.log('Starting my appointment chat flow...');
      
      // Hide menu section and show chat shell
      document.getElementById('menuSection').style.display = 'none';
      document.getElementById('chatShell').style.display = '';
      
      // Update chat heading
      document.getElementById('chatHeading').textContent = 'My Appointments';
      
      // Set current flow
      sessionStorage.setItem('currentFlow', 'myAppointment');
      
      // Clear chat messages and set placeholder
      const chatMessages = document.getElementById('chatMessages');
      if (chatMessages) chatMessages.innerHTML = '';
      
      const chatInput = document.getElementById('chatInput');
      if (chatInput) chatInput.placeholder = 'Type your message here...';
      
      // Start my appointment flow immediately
      if (window.startMyAppointmentChatFlow) {
        window.startMyAppointmentChatFlow(window.currentLang || 'english');
      }
    }

    // Function to start general query chat flow
    function startGeneralQueryChatFlow() {
      console.log('Starting general query chat flow...');
      
      // Hide menu section and show chat shell
      document.getElementById('menuSection').style.display = 'none';
      document.getElementById('chatShell').style.display = '';
      
      // Update chat heading
      document.getElementById('chatHeading').textContent = 'General Query';
      
      // Set current flow
      sessionStorage.setItem('currentFlow', 'general');
      
      // Clear chat messages and set placeholder
      const chatMessages = document.getElementById('chatMessages');
      if (chatMessages) chatMessages.innerHTML = '';
      
      const chatInput = document.getElementById('chatInput');
      if (chatInput) chatInput.placeholder = 'Type your message here...';
      
      // Start general query flow immediately
      if (window.startGeneralQueryChatFlow) {
        window.startGeneralQueryChatFlow(window.currentLang || 'english');
      }
    }

    // Add hover effects to menu cards
    document.addEventListener('DOMContentLoaded', function() {
      const menuCards = document.querySelectorAll('.menu-card');
      
      menuCards.forEach(card => {
        // Add hover effect
        card.addEventListener('mouseenter', function() {
          this.style.transform = 'translateY(-5px) scale(1.02)';
          this.style.boxShadow = '0 10px 30px rgba(0, 0, 0, 0.2)';
          this.style.transition = 'all 0.3s ease';
        });
        
        card.addEventListener('mouseleave', function() {
          this.style.transform = 'translateY(0) scale(1)';
          this.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.1)';
        });
        
        // Add click effect
        card.addEventListener('click', function() {
          this.style.transform = 'translateY(-2px) scale(0.98)';
          setTimeout(() => {
            this.style.transform = 'translateY(0) scale(1)';
          }, 150);
        });
      });
    });
  </script>

  <!-- Hospital-specific data loading -->
  <script>
    // Get hospital_id from URL parameter
    function getHospitalId() {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get('hospital_id') || 'xyz';
    }
    
    // Store hospital_id in session storage for use across pages
    document.addEventListener("DOMContentLoaded", () => {
      const hospitalId = getHospitalId();
      sessionStorage.setItem('currentHospitalId', hospitalId);
      
      // Update hospital name display
      const hospitalNameElement = document.getElementById('hospitalName');
      if (hospitalNameElement && hospitalId !== 'xyz') {
        hospitalNameElement.textContent = hospitalId.charAt(0).toUpperCase() + hospitalId.slice(1) + ' Hospital';
      }
      
      // Check if FontAwesome loaded properly
      setTimeout(() => {
        const testIcon = document.querySelector('.fa-user-md');
        if (testIcon && getComputedStyle(testIcon, '::before').content === '""') {
          console.log('FontAwesome not loaded, using fallback icons');
          // FontAwesome didn't load, fallback icons will be used
        }
      }, 1000);
    });
  </script>

  <!-- Auto-start flow -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const path = window.location.pathname;
      const hospitalId = getHospitalId();
      
      if (path.includes("/booking") && window.startBookingFlow) {
        sessionStorage.setItem("currentFlow", "booking");
        document.getElementById("menuSection").style.display = "none";
        document.getElementById("chatShell").style.display = "";
        document.getElementById("chatHeading").textContent = "Booking Appointment";
        window.startBookingFlow();
      } else if (path.includes("/myappointments") && window.startMyAppointmentChatFlow) {
        sessionStorage.setItem("currentFlow", "myAppointment");
        document.getElementById("menuSection").style.display = "none";
        document.getElementById("chatShell").style.display = "";
        document.getElementById("chatHeading").textContent = "My Appointments";
        window.startMyAppointmentChatFlow(window.currentLang || "english");

      } else if (path.includes("/general") && window.startGeneralQueryFlow) {
        sessionStorage.setItem("currentFlow", "general");
        document.getElementById("menuSection").style.display = "none";
        document.getElementById("chatShell").style.display = "";
        document.getElementById("chatHeading").textContent = "General Query";
        window.startGeneralQueryFlow(window.currentLang || "english");
      }
    });
  </script>

</body>
</html>
