<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Edit Appointment</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'sky-blue': '#87CEEB',
            'lavender': '#E6E6FA',
            'mint': '#D0F0C0',
            'pale-blue': '#dbeafe',
          },
          fontFamily: {
            sans: ['Inter', 'sans-serif']
          }
        }
      }
    }
  </script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(to right, #87CEEB, #ffffff, #E6E6FA);
      min-height: 100vh;
    }
    .sidebar-link { display: block; font-weight: 700; padding: 0.5rem 1rem; border-radius: 0.5rem; transition: all 0.2s ease-in-out; }
    .sidebar-link:hover { background-color: #bfdbfe; transform: translateX(5px); }
    .sidebar-link.active { background-color: #93c5fd; color: #1e40af; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .btn-3d {
      background: linear-gradient(45deg, #14a1d4, #37c5c5);
      color: white;
      font-weight: bold;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      box-shadow: 0 4px 0 #2C7A7B, 0 6px 12px rgba(0, 0, 0, 0.15);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }
    .btn-3d:active {
      transform: translateY(3px);
      box-shadow: 0 2px 0 #2C7A7B;
    }
  </style>
</head>
<body class="flex">
  <!-- Sidebar -->
  <aside class="w-64 bg-pale-blue p-6 space-y-4 shadow-lg rounded-r-xl sticky top-0 h-screen">
    <div class="text-2xl font-bold text-blue-800">Admin Panel</div>
    <nav>
      <a href="{{ url_for('admin_bp.admin_dashboard') }}" class="sidebar-link">Dashboard</a>
      <a href="{{ url_for('admin_bp.departments') }}" class="sidebar-link">Departments</a>
      <a href="{{ url_for('admin_bp.doctors') }}" class="sidebar-link">Doctors</a>
      <a href="{{ url_for('admin_bp.appointments') }}" class="sidebar-link active">Appointments</a>
      <a href="{{ url_for('admin_bp.profile') }}" class="sidebar-link">Profile</a>
      <a href="{{ url_for('admin_bp.change_password') }}" class="sidebar-link">Change Password</a>
      <a href="{{ url_for('admin_bp.logout') }}" class="sidebar-link text-red-600 hover:bg-red-200 mt-4">Logout</a>
    </nav>
  </aside>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col min-h-screen">
    <main class="p-8 flex-1">
      <h1 class="text-4xl font-extrabold text-gray-800 mb-8 border-b pb-2">Edit Appointment</h1>

      <div class="bg-white p-6 rounded-xl shadow-2xl border border-mint max-w-3xl mx-auto">
        <form method="POST" action="{{ url_for('admin_bp.edit_appointment', appointment_id=appointment.id) }}" class="space-y-5">
          <div>
            <label for="patient_name" class="block mb-1 font-semibold">Patient Name *</label>
            <input type="text" id="patient_name" name="patient_name" value="{{ appointment.patient_name }}" required class="w-full border px-4 py-2 rounded-md" />
          </div>

          <div>
            <label for="phone_number" class="block mb-1 font-semibold">Phone Number *</label>
            <input type="tel" id="phone_number" name="phone_number" value="{{ appointment.phone_number }}" required class="w-full border px-4 py-2 rounded-md" />
          </div>

          <div>
            <label for="department" class="block mb-1 font-semibold">Department *</label>
            <select id="department" name="department" required class="w-full border px-4 py-2 rounded-md">
              {% for dept in departments %}
                <option value="{{ dept.id }}" {% if dept.id == appointment.department_id %}selected{% endif %}>{{ dept.name_en }}</option>
              {% endfor %}
            </select>
          </div>

          <div>
            <label for="doctor" class="block mb-1 font-semibold">Doctor *</label>
            <select id="doctor" name="doctor" required class="w-full border px-4 py-2 rounded-md">
              {% for doc in doctors %}
                <option value="{{ doc.id }}" {% if doc.id == appointment.doctor_id %}selected{% endif %}>{{ doc.name_en }}</option>
              {% endfor %}
            </select>
          </div>

          <div>
            <label for="date" class="block mb-1 font-semibold">Date *</label>
            <input type="date" id="date" name="date" value="{{ appointment.date }}" required class="w-full border px-4 py-2 rounded-md" />
          </div>

          <div>
            <label for="time" class="block mb-1 font-semibold">Time *</label>
            <input type="text" id="time" name="time" value="{{ appointment.time }}" required class="w-full border px-4 py-2 rounded-md" />
          </div>

          <div>
            <label for="status" class="block mb-1 font-semibold">Status *</label>
            <select id="status" name="status" required class="w-full border px-4 py-2 rounded-md">
              <option value="Pending" {% if appointment.status == 'Pending' %}selected{% endif %}>Pending</option>
              <option value="Confirmed" {% if appointment.status == 'Confirmed' %}selected{% endif %}>Confirmed</option>
              <option value="Cancelled" {% if appointment.status == 'Cancelled' %}selected{% endif %}>Cancelled</option>
              <option value="Completed" {% if appointment.status == 'Completed' %}selected{% endif %}>Completed</option>
            </select>
          </div>

          <div class="pt-4 flex space-x-4">
            <button type="submit" class="btn-3d">Update Appointment</button>
            <a href="{{ url_for('admin_bp.appointments') }}" class="bg-gray-300 px-6 py-2 rounded">Cancel</a>
          </div>
        </form>
      </div>
    </main>
  </div>
</body>
</html>
